<!DOCTYPE html><html lang="en"><head><script async="" src="https://www.googletagmanager.com/gtag/js?id=UA-34039831-2"></script><script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","UA-34039831-2")</script><meta charset="utf-8"><link rel="shortcut icon" href="/blog-next/favicon.png"><meta name="viewport" content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name="theme-color" content="#000000"><link rel="manifest" href="/blog-next/manifest.json"><title>Stupid Mario</title><link href="/blog-next/static/css/main.5324458f.chunk.css" rel="stylesheet"><meta property="og:url" content="https://blog.richardvanderdys.com/post/Stupid-Mario" data-react-helmet="true"><meta property="og:type" content="article" data-react-helmet="true"><meta property="og:title" content="Stupid Mario" data-react-helmet="true"><meta property="og:description" content="Learning neural network algorithms with Mario and emulators" data-react-helmet="true"></head><body><noscript>You need to enable JavaScript to run this app.</noscript><div id="root"><div data-reactroot=""><div class="header"><div class="avatar"><div class="note-wrapper n1"><div class="note">♫</div></div><div class="note-wrapper n2"><div class="note">♪</div></div><div class="note-wrapper n3"><div class="note">♫</div></div><div class="note-wrapper n4"><div class="note">♪</div></div><svg version="1.1" id="Layer_1" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 373.6 452.1" style="enable-background:new 0 0 373.6 452.1" xml:space="preserve"><g><line class="st2" x1="212.6" y1="390.2" x2="212.6" y2="390.2"></line><line class="st2" x1="161" y1="390.2" x2="161" y2="390.2"></line><line x1="303.1" y1="192" x2="303.1" y2="141.9"></line><line x1="123.1" y1="390" x2="100.1" y2="377"></line><line x1="99.7" y1="376.8" x2="99" y2="376.4"></line><path class="st2" d="M146.5,390"></path><path class="st2" d="M122.8,390"></path><path class="st3" d="M258.9,335.6l-5.7-9.8l-12.5-21.6l-7.8-13.6h-91.5l-8.1,14.1l-11.9,20.6l-6.4,11.1l-44.4-46.3v69.8l29.2,16.8 l0.4,0.2l23,13.2l63.7,36.8l63.8-36.8l24.3-14.1l28.2-16.2v-69.8L258.9,335.6z M228.8,390.2h-16.2l14.1-24.5l-20-44.6h-39.9 l-20,44.6l14.1,24.5h-15.1l-31.4-34.5l7.8-12l6.1-9.5l16.3-25.2l1.2-1.9l40.9,2l42-2l1.2,1.9l16.5,25.4l5.4,8.3l8.4,12.9 L228.8,390.2z"></path><polygon class="st1" points="146.9,365.7 161,390.2 145.9,390.2 114.5,355.7 122.2,343.8 128.4,334.3 144.7,309.1 145.9,307.3  150.1,307.5 147.5,309.1 166.9,321.2 	"></polygon><polygon class="st4" points="260.2,355.7 228.8,390.2 212.6,390.2 226.7,365.7 206.8,321.2 227.1,309.1 224.5,307.5 228.8,307.3  230,309.1 246.4,334.5 251.8,342.8 	"></polygon><polygon class="st1" points="303,141.8 303,290.1 258.9,335.6 253.2,325.7 240.7,304.1 232.9,290.5 141.4,290.5 133.3,304.6  121.4,325.3 115,336.4 70.5,290.1 70.5,141.8 118,92.4 119.3,91 137.8,72.6 235.8,72.6 254.3,91 274.9,111.7 	"></polygon><polygon class="st3" points="303,73.9 303,141.8 274.9,111.7 254.3,91 235.8,72.6 137.8,72.6 119.3,91 118,92.4 70.5,141.8  70.5,73.9 186.8,5.8 	"></polygon><g class="st5"><polygon class="st6" points="303,73.9 303,141.8 274.9,111.7 254.3,91 235.8,72.6 186.8,72.6 186.8,5.8 		"></polygon></g><polygon class="st4" points="303,141.8 303,290.1 258.9,335.6 253.2,325.7 240.7,304.1 232.9,290.5 186.8,290.5 186.8,72.6  235.8,72.6 254.3,91 274.9,111.7 	"></polygon><polygon class="st7" points="186.8,309.3 186.8,321.2 166.9,321.2 147.5,309.1 150.1,307.5 	"></polygon><polygon class="st8" points="224.5,307.5 227.1,309.1 206.8,321.2 186.8,321.2 186.8,309.3 	"></polygon><polygon class="st9" points="303,290.1 303,359.9 274.9,376.2 250.5,390.2 186.8,427 186.8,321.2 206.8,321.2 226.7,365.7  212.6,390.2 228.8,390.2 260.2,355.7 251.8,342.8 246.4,334.5 230,309.1 228.8,307.3 186.8,309.3 186.8,290.5 232.9,290.5  240.7,304.1 253.2,325.7 258.9,335.6 	"></polygon></g><g id="Layer_2"><path class="st10" d="M296.8,187.7l-2.8-7.1c-1.4-3.2-4.5-5.2-7.9-5.2h-71c-3.4,0-6.5,2-7.9,5.2l-2.8,7.1h-28.4l-2.9-7.2 c-1.3-3.1-4.4-5.1-7.8-5.1H94.1c-3.4,0-6.4,2-7.8,5.1l-2.9,7.2h-13v8.7h10.3c0,0.5,0.1,1,0.2,1.4l6.2,29.4c0.8,3.9,4.3,6.7,8.3,6.7 H164c4,0,7.4-2.8,8.3-6.7l6.2-29.4c0.1-0.5,0.2-1,0.2-1.4h23c0,0.5,0.1,1,0.2,1.5l6.1,29.2c0.8,4,4.4,6.9,8.4,6.9h68.3 c4.1,0,7.6-2.9,8.4-6.9l6.1-29.2c0.1-0.5,0.2-1,0.2-1.5h3.7v-8.7H296.8z M173.7,199.4l-5.2,24.7c-0.7,3.5-3.8,6.1-7.4,6l-62.6-0.7 c-3.6,0-6.7-2.6-7.5-6.2l-4.9-24.8c-0.1-0.6-0.2-1.3-0.2-1.9c0-0.9,0.2-1.9,0.6-2.7l1.9-6l1.3-4.2c1.2-2.8,3.9-4.6,6.9-4.5l65,0.8 c3,0,5.8,1.9,7,4.7l1.4,3.2l3.1,7c0.2,0.5,0.4,1.1,0.5,1.7C173.9,197.4,173.9,198.4,173.7,199.4z M294.8,200l-5.2,24.7 c-0.7,3.5-3.8,6.1-7.4,6l-62.6-0.7c-3.6,0-6.7-2.6-7.5-6.2l-5.9-24.8c-0.2-0.9-0.2-1.7-0.1-2.6c0.1-0.7,0.3-1.4,0.5-2l2.8-6.6 l1.5-3.5c1.2-2.8,3.9-4.6,6.9-4.5l64.9,0.8c3,0,5.8,1.9,7,4.7l1.1,2.6l3.4,7.7c0.2,0.3,0.3,0.7,0.4,1 C295,197.6,295.1,198.8,294.8,200z"></path><path class="st11" d="M294.8,200l-5.2,24.7c-0.7,3.5-3.8,6.1-7.4,6l-62.6-0.7c-3.6,0-6.7-2.6-7.5-6.2l-5.9-24.8 c-0.2-0.9-0.2-1.7-0.1-2.6c0.1-0.7,0.3-1.4,0.5-2l2.8-6.6l1.5-3.5c1.2-2.8,3.9-4.6,6.9-4.5l64.9,0.8c3,0,5.8,1.9,7,4.7l1.1,2.6 l3.4,7.7c0.2,0.3,0.3,0.7,0.4,1C295,197.6,295.1,198.8,294.8,200z"></path><g class="st12"><path class="st13" d="M173.7,199.4l-5.2,24.7c-0.7,3.5-3.8,6.1-7.4,6l-62.6-0.7c-3.6,0-6.7-2.6-7.5-6.2l-4.9-24.8 c-0.1-0.6-0.2-1.3-0.2-1.9c0-0.9,0.2-1.9,0.6-2.7l1.9-6l1.3-4.2c1.2-2.8,3.9-4.6,6.9-4.5l65,0.8c3,0,5.8,1.9,7,4.7l1.4,3.2l3.1,7 c0.2,0.5,0.4,1.1,0.5,1.7C173.9,197.4,173.9,198.4,173.7,199.4z"></path></g><path class="st14" d="M86,93.4c14.9-5.3,39.7-20.8,51.8-20.9s23.8-16.8,23.8-16.8h-57.7L86,93.4z"></path><path class="st3" d="M186.8,72.6c0,0-20.3-0.4-49,0S89.9,84.4,86,93.4c0,0-14.4-47.5,11.1-69.5s68-30.7,89.7-18.2"></path></g><polygon class="st15" points="186.8,290.5 175.6,278.3 151.8,284.4 141.2,274 156.2,278.3 169.5,269.3 186.6,274.8 "></polygon><polygon class="st16" points="186.8,290.5 198.3,278.3 222.7,284.4 233.5,274 218.2,278.3 204.6,269.3 187,274.8 "></polygon><polygon class="st3" points="88.8,173.6 129.4,162.1 173.6,163.8 165.7,172.9 129.9,168.8 "></polygon><polygon class="st9" points="290.9,173.6 250.3,162.1 206.1,163.8 214,172.9 249.8,168.8 "></polygon></svg></div><a class="title" href="/blog-next/"><span class="a">dijs</span><span class="b">talks</span></a><div class="bottom"><a class="back" href="/blog-next/">Back to all posts</a><div class="social"><a href="https://github.com/dijs" rel="noopener noreferrer" target="_blank"><svg role="img" viewBox="0 0 24 24" class="icon"><title>GitHub icon</title><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"></path></svg></a><a href="https://www.linkedin.com/in/richard-van-der-dys-iii-91880a24/" rel="noopener noreferrer" target="_blank"><svg role="img" viewBox="0 0 24 24" class="icon"><title>LinkedIn icon</title><path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"></path></svg></a><a href="https://npmjs.com/~dijs" rel="noopener noreferrer" target="_blank"><svg role="img" viewBox="0 0 24 24" class="icon"><title>NPM icon</title><path d="M0 7.334v8h6.666v1.332H12v-1.332h12v-8H0zm6.666 6.664H5.334v-4H3.999v4H1.335V8.667h5.331v5.331zm4 0v1.336H8.001V8.667h5.334v5.332h-2.669v-.001zm12.001 0h-1.33v-4h-1.336v4h-1.335v-4h-1.33v4h-2.671V8.667h8.002v5.331z"></path><path d="M10.665 10H12v2.667h-1.335V10z"></path></svg></a></div></div></div><article class="post"><div class="info"><h1>Stupid Mario</h1><div class="date">Dec 1, 2014</div></div><div class="content"><p>I have seen a bunch of neural network articles around Hacker News lately. The way I boiled it down was: if you could simplify a problem and solution down to a finite number of inputs and a binary output, you could train a network to solve that problem on its own.</p><p>I used to do a lot of Mario speed runs in high school. I was never any good, but to this day that is the only way I can play Mario now. It has been ingrained into my muscle memory.</p><p>What if I taught a neural network how to play Mario?</p><p><strong>Hypothesis</strong></p><p>Starting simple. I just want to see if I can train a network to NOT DIE. I will ask the network when to jump throughout the level. After so many experiences dying where he should jump, hopefully he will learn to jump.</p><p><strong>Setup</strong></p><p>I used the fantastic <a href="https://fir.sh/projects/jsnes/">JSNES</a> to facilitate the game itself. I was able to easily grab the data I needed directly from the emulator's memory. I found this great <a href="http://datacrystal.romhacking.net/wiki/Super_Mario_Bros.:RAM_map">map</a> that made it easy to find the exact variables I used for training and event detection.</p><p>The next part was the brain itself.</p><p>I tried quite a few big open source neural network Javascript libraries, but due to development issues, I decided to just use a simple perceptron function.</p><p><strong>Training</strong></p><p>I wanted to training to be just like a human, visual. So my training input was a normalized frame buffer which I converted to greyscale for ease of use with the perceptron.</p><p>The output would be if Mario needed to jump right after that frame.</p><p>I simply trained the perceptron by detecting when Mario had died and used the previous buffer.</p><p>Automating the game play was the trickiest part. I had to detect game overs, collision deaths, and pit fall deaths, and automate Mario's controls.</p><p><strong>Outcome</strong></p><p>No, I do not have a perfect Mario player yet... that is why I titled this post <em>Stupid</em> Mario.</p><p>It is hard to truly tell if a network is learning until it makes sufficient progress.</p><p><a href="http://www.richardvanderdys.com/projects/stupid-mario">Try it out!</a></p><p><strong>Future Ideas</strong></p><ul><li>Use more events for training</li><li>Save/Load network data</li><li>Use a big name network library</li><li>Other games</li></ul></div></article><a class="back" href="/blog-next/">Back to all posts</a></div></div><script>!function(i){function e(e){for(var r,t,n=e[0],o=e[1],u=e[2],l=0,f=[];l<n.length;l++)t=n[l],p[t]&&f.push(p[t][0]),p[t]=0;for(r in o)Object.prototype.hasOwnProperty.call(o,r)&&(i[r]=o[r]);for(s&&s(e);f.length;)f.shift()();return c.push.apply(c,u||[]),a()}function a(){for(var e,r=0;r<c.length;r++){for(var t=c[r],n=!0,o=1;o<t.length;o++){var u=t[o];0!==p[u]&&(n=!1)}n&&(c.splice(r--,1),e=l(l.s=t[0]))}return e}var t={},p={2:0},c=[];function l(e){if(t[e])return t[e].exports;var r=t[e]={i:e,l:!1,exports:{}};return i[e].call(r.exports,r,r.exports,l),r.l=!0,r.exports}l.m=i,l.c=t,l.d=function(e,r,t){l.o(e,r)||Object.defineProperty(e,r,{enumerable:!0,get:t})},l.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},l.t=function(r,e){if(1&e&&(r=l(r)),8&e)return r;if(4&e&&"object"==typeof r&&r&&r.__esModule)return r;var t=Object.create(null);if(l.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:r}),2&e&&"string"!=typeof r)for(var n in r)l.d(t,n,function(e){return r[e]}.bind(null,n));return t},l.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return l.d(r,"a",r),r},l.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},l.p="/blog-next/";var r=window.webpackJsonp=window.webpackJsonp||[],n=r.push.bind(r);r.push=e,r=r.slice();for(var o=0;o<r.length;o++)e(r[o]);var s=n;a()}([])</script><script src="/blog-next/static/js/1.3ac7959d.chunk.js"></script><script src="/blog-next/static/js/main.c02a1265.chunk.js"></script></body></html>