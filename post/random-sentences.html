<!DOCTYPE html><html><head><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><title>Random Sentences</title><meta property="og:url" content="https://blog.richardvanderdys.com/post/random-sentences"/><meta property="og:type" content="article"/><meta property="og:title" content="Random Sentences"/><meta property="og:description" content="Generating study material for language learning"/><meta name="description" content="Generating study material for language learning"/><link href="/favicon.png" rel="shortcut icon"/><meta name="next-head-count" content="9"/><link rel="preload" href="/_next/static/css/85eb77700377eeabbc58.css" as="style"/><link rel="stylesheet" href="/_next/static/css/85eb77700377eeabbc58.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-a54b4f32bdc1ef890ddd.js"></script><script src="/_next/static/chunks/webpack-61095c13c5984b221292.js" defer=""></script><script src="/_next/static/chunks/framework-0441fae7fd130f37dee1.js" defer=""></script><script src="/_next/static/chunks/main-a76b5552fbb06f190312.js" defer=""></script><script src="/_next/static/chunks/pages/_app-0f614a1c6af0ad810975.js" defer=""></script><script src="/_next/static/chunks/664-47388150561e3fb11302.js" defer=""></script><script src="/_next/static/chunks/724-116dd51d1e4befbc06a1.js" defer=""></script><script src="/_next/static/chunks/pages/post/%5Bslug%5D-005fa52f9cc74752398f.js" defer=""></script><script src="/_next/static/Di4rWVvYeeWQH6DW9oLr8/_buildManifest.js" defer=""></script><script src="/_next/static/Di4rWVvYeeWQH6DW9oLr8/_ssgManifest.js" defer=""></script></head><body><div id="__next"><div><header class="header"><div class="avatar"><div class="note-wrapper n1"><div class="note">♫</div></div><div class="note-wrapper n2"><div class="note">♪</div></div><div class="note-wrapper n3"><div class="note">♫</div></div><div class="note-wrapper n4"><div class="note">♪</div></div><svg id="avatar_svg__Layer_1" xmlns="http://www.w3.org/2000/svg" x="0" y="0" viewBox="0 0 373.6 452.1" xml:space="preserve"><style>.avatar_svg__st1{fill:#fdd7be}.avatar_svg__st2{stroke:#000;stroke-linecap:round;stroke-miterlimit:10}.avatar_svg__st3{fill:#cbb29b}.avatar_svg__st4{fill:#e1bda8}.avatar_svg__st9{opacity:.63;fill:#564134}</style><path class="avatar_svg__st2" d="M161 390.2"></path><path d="M303.1 192v-50.1M123.1 390l-23-13M99.7 376.8l-.7-.4"></path><path class="avatar_svg__st3" d="M258.9 335.6l-5.7-9.8-12.5-21.6-7.8-13.6h-91.5l-8.1 14.1-11.9 20.6-6.4 11.1-44.4-46.3v69.8l29.2 16.8.4.2 23 13.2 63.7 36.8 63.8-36.8L275 376l28.2-16.2V290l-44.3 45.6zm-30.1 54.6h-16.2l14.1-24.5-20-44.6h-39.9l-20 44.6 14.1 24.5h-15.1l-31.4-34.5 7.8-12 6.1-9.5 16.3-25.2 1.2-1.9 40.9 2 42-2 1.2 1.9 16.5 25.4 5.4 8.3 8.4 12.9-31.4 34.6z"></path><path class="avatar_svg__st1" d="M146.9 365.7l14.1 24.5h-15.1l-31.4-34.5 7.7-11.9 6.2-9.5 16.3-25.2 1.2-1.8 4.2.2-2.6 1.6 19.4 12.1z"></path><path class="avatar_svg__st4" d="M260.2 355.7l-31.4 34.5h-16.2l14.1-24.5-19.9-44.5 20.3-12.1-2.6-1.6 4.3-.2 1.2 1.8 16.4 25.4 5.4 8.3z"></path><path class="avatar_svg__st1" d="M303 141.8v148.3l-44.1 45.5-5.7-9.9-12.5-21.6-7.8-13.6h-91.5l-8.1 14.1-11.9 20.7-6.4 11.1-44.5-46.3V141.8L118 92.4l1.3-1.4 18.5-18.4h98L254.3 91l20.6 20.7z"></path><path class="avatar_svg__st3" d="M303 73.9v67.9l-28.1-30.1L254.3 91l-18.5-18.4h-98L119.3 91l-1.3 1.4-47.5 49.4V73.9L186.8 5.8z"></path><path fill="#564134" d="M303 73.9v67.9l-28.1-30.1L254.3 91l-18.5-18.4h-49V5.8z" opacity="0.63"></path><path class="avatar_svg__st4" d="M303 141.8v148.3l-44.1 45.5-5.7-9.9-12.5-21.6-7.8-13.6h-46.1V72.6h49L254.3 91l20.6 20.7z"></path><path fill="#dc9195" d="M186.8 309.3v11.9h-19.9l-19.4-12.1 2.6-1.6z"></path><path fill="#c9878d" d="M224.5 307.5l2.6 1.6-20.3 12.1h-20v-11.9z"></path><path class="avatar_svg__st9" d="M303 290.1v69.8l-28.1 16.3-24.4 14-63.7 36.8V321.2h20l19.9 44.5-14.1 24.5h16.2l31.4-34.5-8.4-12.9-5.4-8.3-16.4-25.4-1.2-1.8-42 2v-18.8h46.1l7.8 13.6 12.5 21.6 5.7 9.9z"></path><g id="avatar_svg__Layer_2"><path d="M296.8 187.7l-2.8-7.1c-1.4-3.2-4.5-5.2-7.9-5.2h-71c-3.4 0-6.5 2-7.9 5.2l-2.8 7.1H176l-2.9-7.2c-1.3-3.1-4.4-5.1-7.8-5.1H94.1c-3.4 0-6.4 2-7.8 5.1l-2.9 7.2h-13v8.7h10.3c0 .5.1 1 .2 1.4l6.2 29.4c.8 3.9 4.3 6.7 8.3 6.7H164c4 0 7.4-2.8 8.3-6.7l6.2-29.4c.1-.5.2-1 .2-1.4h23c0 .5.1 1 .2 1.5l6.1 29.2c.8 4 4.4 6.9 8.4 6.9h68.3c4.1 0 7.6-2.9 8.4-6.9l6.1-29.2c.1-.5.2-1 .2-1.5h3.7v-8.7h-6.3zm-123.1 11.7l-5.2 24.7c-.7 3.5-3.8 6.1-7.4 6l-62.6-.7c-3.6 0-6.7-2.6-7.5-6.2l-4.9-24.8c-.1-.6-.2-1.3-.2-1.9 0-.9.2-1.9.6-2.7l1.9-6 1.3-4.2c1.2-2.8 3.9-4.6 6.9-4.5l65 .8c3 0 5.8 1.9 7 4.7l1.4 3.2 3.1 7c.2.5.4 1.1.5 1.7.3.9.3 1.9.1 2.9zm121.1.6l-5.2 24.7c-.7 3.5-3.8 6.1-7.4 6l-62.6-.7c-3.6 0-6.7-2.6-7.5-6.2l-5.9-24.8c-.2-.9-.2-1.7-.1-2.6.1-.7.3-1.4.5-2l2.8-6.6 1.5-3.5c1.2-2.8 3.9-4.6 6.9-4.5l64.9.8c3 0 5.8 1.9 7 4.7l1.1 2.6 3.4 7.7c.2.3.3.7.4 1 .4 1 .5 2.2.2 3.4z" fill="#434343"></path><path d="M294.8 200l-5.2 24.7c-.7 3.5-3.8 6.1-7.4 6l-62.6-.7c-3.6 0-6.7-2.6-7.5-6.2l-5.9-24.8c-.2-.9-.2-1.7-.1-2.6.1-.7.3-1.4.5-2l2.8-6.6 1.5-3.5c1.2-2.8 3.9-4.6 6.9-4.5l64.9.8c3 0 5.8 1.9 7 4.7l1.1 2.6 3.4 7.7c.2.3.3.7.4 1 .4 1 .5 2.2.2 3.4z" opacity="0.61" fill="#e2b473"></path><path d="M173.7 199.4l-5.2 24.7c-.7 3.5-3.8 6.1-7.4 6l-62.6-.7c-3.6 0-6.7-2.6-7.5-6.2l-4.9-24.8c-.1-.6-.2-1.3-.2-1.9 0-.9.2-1.9.6-2.7l1.9-6 1.3-4.2c1.2-2.8 3.9-4.6 6.9-4.5l65 .8c3 0 5.8 1.9 7 4.7l1.4 3.2 3.1 7c.2.5.4 1.1.5 1.7.3.9.3 1.9.1 2.9z" fill="#e2b473" opacity="0.34"></path><path d="M86 93.4c14.9-5.3 39.7-20.8 51.8-20.9s23.8-16.8 23.8-16.8h-57.7L86 93.4z" opacity="0.62" fill="#564134"></path><path class="avatar_svg__st3" d="M186.8 72.6s-20.3-.4-49 0S89.9 84.4 86 93.4c0 0-14.4-47.5 11.1-69.5s68-30.7 89.7-18.2"></path></g><path opacity="0.83" fill="#e1bda8" d="M186.8 290.5l-11.2-12.2-23.8 6.1-10.6-10.4 15 4.3 13.3-9 17.1 5.5z"></path><path opacity="0.83" fill="#ccaa9b" d="M186.8 290.5l11.5-12.2 24.4 6.1 10.8-10.4-15.3 4.3-13.6-9-17.6 5.5z"></path><path class="avatar_svg__st3" d="M88.8 173.6l40.6-11.5 44.2 1.7-7.9 9.1-35.8-4.1z"></path><path class="avatar_svg__st9" d="M290.9 173.6l-40.6-11.5-44.2 1.7 7.9 9.1 35.8-4.1z"></path></svg></div><a class="logo" href="/"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 567 139"><defs><style>.logo_svg__cls-1{fill:#fff;fill-rule:evenodd}</style></defs><path id="logo_svg__dijs" class="logo_svg__cls-1" d="M53.494-.206V58.87a23.727 23.727 0 00-9.644-7.58 30.658 30.658 0 00-12.741-2.763 32.657 32.657 0 00-15.627 3.683 26.63 26.63 0 00-10.841 10.7A33.13 33.13 0 00.7 79.411a35.17 35.17 0 003.731 16.5 27.431 27.431 0 0010.348 11.121A28.206 28.206 0 0029.56 111a31.633 31.633 0 0013.445-2.834 29.853 29.853 0 0010.348-7.791v9.208h13.234V-.206H53.494zM33.643 99.67a18.85 18.85 0 01-9.855-2.692 19.935 19.935 0 01-7.18-7.367 21.465 21.465 0 010-20.754 19.577 19.577 0 017.18-7.225 19.252 19.252 0 019.855-2.621 20.608 20.608 0 0112.53 4.038 18.5 18.5 0 017.18 10.413v11.05a18.672 18.672 0 01-6.828 11.05 20.331 20.331 0 01-12.882 4.108zm55.609-48.734v58.65h13.093v-58.65H89.252zm-.986-21.108a6.73 6.73 0 002.394 5.242 8.028 8.028 0 005.491 2.125 7.782 7.782 0 005.421-2.125 7.075 7.075 0 000-10.483 7.782 7.782 0 00-5.421-2.125 8.028 8.028 0 00-5.491 2.125 6.733 6.733 0 00-2.393 5.242zM126 137.919a25.983 25.983 0 0010.488-11.05q3.306-6.8 3.309-16.858V50.936h-13.238v58.508q0 13.033-8.447 20.259zm-.427-108.091a6.731 6.731 0 002.394 5.242 8.026 8.026 0 005.49 2.125 7.782 7.782 0 005.421-2.125 7.075 7.075 0 000-10.483 7.782 7.782 0 00-5.421-2.125 8.026 8.026 0 00-5.49 2.125 6.734 6.734 0 00-2.394 5.242zm52.654 81.033q10.839 0 16.753-5.525a18.36 18.36 0 005.913-14.025q0-6.514-4.012-10.342a29.71 29.71 0 00-11.193-6.233q-5.773-1.839-7.743-2.621a11.633 11.633 0 01-3.8-2.55 6.242 6.242 0 01.985-9.633 11.736 11.736 0 016.758-1.913 19.708 19.708 0 016.547 1.558 16.033 16.033 0 015.7 3.825l5.209-8.075a26.759 26.759 0 00-8.87-4.958 35.481 35.481 0 00-10.981-1.558q-9.714 0-15.135 5.242a16.912 16.912 0 00-5.42 12.608q0 12.325 14.923 17.142 5.492 1.7 7.814 2.55a11.29 11.29 0 014.153 2.692 6.542 6.542 0 011.83 4.817 6.208 6.208 0 01-2.956 5.667 14.175 14.175 0 01-7.6 1.841 17.744 17.744 0 01-7.673-1.841 27.917 27.917 0 01-7.391-5.242l-5.631 7.65a22.812 22.812 0 009.5 6.658 33.769 33.769 0 0012.319 2.267z"></path><path id="logo_svg__talks" class="logo_svg__cls-1" d="M194.426 24.582v4.471h31.581v79.629h4.323V29.053h31.582v-4.471h-67.486zm73.97 84.1h4.683l11.408-27.792h41.188l11.288 27.792h4.8l-34.344-84.1h-4.683zm36.625-78.3l18.853 46.158h-37.586zm113.717 78.3v-4.471H360.5V24.582h-4.443v84.1h62.683zm8.765-84.1v84.1h4.443v-20.9L456.8 62.765l32.663 45.917h5.283l-34.821-49.058 34.944-35.042h-6.244l-56.679 56.913V24.582H427.5zm109.874 43.863q9.486 1.934 14.23 3.444a17.87 17.87 0 017.866 4.894q3.12 3.384 3.122 9.667a17.013 17.013 0 01-7.265 14.5q-7.268 5.318-18.313 5.316a34.339 34.339 0 01-15.37-3.2 22.975 22.975 0 01-9.907-9 26.129 26.129 0 01-3.423-13.533h-4.443a30.224 30.224 0 004.026 15.643 26.942 26.942 0 0011.588 10.573 39.047 39.047 0 0017.532 3.746 40.808 40.808 0 0014.89-2.659A24.9 24.9 0 00562.9 99.8a21.026 21.026 0 004.143-13.231q0-7.853-3.783-12.2a21.13 21.13 0 00-9.246-6.223 134.884 134.884 0 00-15.314-3.931 143.043 143.043 0 01-15.13-3.867 21.582 21.582 0 01-8.766-5.256 12.661 12.661 0 01-3.362-9.244 16 16 0 013.542-10.633 21.137 21.137 0 019.186-6.283 35.209 35.209 0 0112.13-2.054 29.743 29.743 0 0113.329 2.96 23.214 23.214 0 019.486 8.4A22.8 22.8 0 01562.6 50.8h4.443a26.622 26.622 0 00-4.083-14.621 27.823 27.823 0 00-11.108-9.969 33.623 33.623 0 00-15.43-3.565 38.378 38.378 0 00-15.431 2.9 23.607 23.607 0 00-10.327 8.217A21.189 21.189 0 00507 46.09a16.42 16.42 0 003.663 11.056 24.52 24.52 0 0010.087 6.767 104.823 104.823 0 0016.631 4.531z"></path></svg></a><div class="bottom"><a class="back" href="/">Back to all posts</a><div class="social"><a href="https://github.com/dijs" rel="noopener noreferrer" target="_blank"><svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" class="icon"><path d="M12 .297c-6.63 0-12 5.373-12 12 0 5.303 3.438 9.8 8.205 11.385.6.113.82-.258.82-.577 0-.285-.01-1.04-.015-2.04-3.338.724-4.042-1.61-4.042-1.61C4.422 18.07 3.633 17.7 3.633 17.7c-1.087-.744.084-.729.084-.729 1.205.084 1.838 1.236 1.838 1.236 1.07 1.835 2.809 1.305 3.495.998.108-.776.417-1.305.76-1.605-2.665-.3-5.466-1.332-5.466-5.93 0-1.31.465-2.38 1.235-3.22-.135-.303-.54-1.523.105-3.176 0 0 1.005-.322 3.3 1.23.96-.267 1.98-.399 3-.405 1.02.006 2.04.138 3 .405 2.28-1.552 3.285-1.23 3.285-1.23.645 1.653.24 2.873.12 3.176.765.84 1.23 1.91 1.23 3.22 0 4.61-2.805 5.625-5.475 5.92.42.36.81 1.096.81 2.22 0 1.606-.015 2.896-.015 3.286 0 .315.21.69.825.57C20.565 22.092 24 17.592 24 12.297c0-6.627-5.373-12-12-12"></path></svg></a><a href="https://www.linkedin.com/in/richard-van-der-dys-iii-91880a24/" rel="noopener noreferrer" target="_blank"><svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" class="icon"><path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433a2.062 2.062 0 01-2.063-2.065 2.064 2.064 0 112.063 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"></path></svg></a><a href="https://npmjs.com/~dijs" rel="noopener noreferrer" target="_blank"><svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" class="icon"><path d="M0 7.334v8h6.666v1.332H12v-1.332h12v-8H0zm6.666 6.664H5.334v-4H3.999v4H1.335V8.667h5.331v5.331zm4 0v1.336H8.001V8.667h5.334v5.332h-2.669v-.001zm12.001 0h-1.33v-4h-1.336v4h-1.335v-4h-1.33v4h-2.671V8.667h8.002v5.331z"></path><path d="M10.665 10H12v2.667h-1.335V10z"></path></svg></a></div></div></header><article class="post"><aside class="info"><h1>Random Sentences</h1><div class="date">Nov 22, 2014</div></aside><main class="content"><p>Recently, I have been trying to learn the Hungarian language. After memorizing a bunch of words, just repeating them to study got boring. I wanted to write a program which randomly created sentences I could use to practice with. Of course, the best practice would be to go find a native speaker near me, but I wanted a challenge...</p><h3>Hypothesis</h3><p>In order to generate random sentences, I needed some kind of sentence building logic. I have used Markov Chains to build random names in the past, so why would it not work for sentences?</p><h3>Data</h3><p>First! I needed data. Thank God for <a href="http://www.gutenberg.org/">http://www.gutenberg.org/</a>. This saved me loads of time finding a bunch of random text.</p><h3>Training</h3><p>This was a lot of data, so I did not want to load it all in memory at once. Let&#x27;s use Stream&#x27;s!</p><p>I streamed the huge text data file and counted all the instances of each <a href="http://en.wikipedia.org/wiki/Bigram">bigram</a> and <a href="http://en.wikipedia.org/wiki/Trigram">trigram</a>. After counting, I sorted each word&#x27;s adjacent neighbor by the number of instances. This gave me a list of words and their most used adajcent bigram and trigram neighbor.</p><h3>Generation</h3><p>With this Markov &quot;link&quot; data, I was able to generate rudimentary sentences. Nothing made sense, but it was easy to read.</p><p>These sentences are not logical, they are built by choosing what word should statistically come next.</p><h3>Ideas for the future:</h3><ul><li>Extract/Analyze subject, verb, object in each sentence</li><li>Use neural networks for training <em>next</em> word</li></ul><h3>Code</h3><pre><code class="language-js">//Create Markov links
function createLinks(input, output, n) {
	var links = {};

	if (!n) {
		n = 2; // bigram by default
	}

	function trainSentence(sentence) {
		NGrams.ngrams(sentence, n).forEach(function(gram) {
			var word = gram[0];
			var neighbor = gram[n - 1];
			if (!links[word]) {
				links[word] = {};
			}
			if (!links[word][neighbor]) {
				links[word][neighbor] = 0;
			}
			links[word][neighbor]++;
		});
	}

	function read() {
		var buffer;
		while ((buffer = stream.read())) {
			buffer
				.toLowerCase()
				.split(/\./g)
				.forEach(trainSentence);
		}
	}

	var stream = fs.createReadStream(input, {
		encoding: &#x27;utf8&#x27;
	});

	stream.on(&#x27;readable&#x27;, read);

	stream.once(&#x27;end&#x27;, function() {
		var sortedLinks = {};
		var keys = Object.keys(links);

		keys.forEach(function(key) {
			var words = Object.keys(links[key]);
			sortedLinks[key] = _.sortBy(words, function(word) {
				return links[key][word];
			});
		});

		fs.writeFile(output, JSON.stringify(sortedLinks, null, &#x27;\t&#x27;));
	});
}</code></pre><pre><code class="language-javascript">//Generate Sentence
function generateSentenceMark2(
	bigramInput,
	trigramInput,
	length,
	k,
	dictionary,
	starter
) {
	var bigrams = require(bigramInput);
	var trigrams = require(trigramInput);

	var current = starter || _.sample(dictionary || Object.keys(bigrams));
	var last;

	var sentence = [current];

	function dictionaryContains(word) {
		return _.contains(dictionary, word);
	}

	function getNeighbor(links, word) {
		var neighbors = links[word];
		if (dictionary) {
			neighbors = neighbors.filter(dictionaryContains);
		}
		// neighbors might be null or empty...
		var neighbor = neighbors[Math.ceil(neighbors.length * Math.random() * k)];
		// Go through all of the words if word doesnt have neighbors
		var i = 0;
		while (!_.has(links, neighbor) &amp;&amp; i &lt; neighbors.length) {
			neighbor = neighbors[i++];
		}
		return neighbor;
	}

	// Generate Neighbors
	_(length - 1).times(function(i) {
		var neighbor =
			i % 2 === 0 ? getNeighbor(bigrams, current) : getNeighbor(trigrams, last);
		last = current;
		current = neighbor;
		sentence.push(current);
	});

	return sentence.join(&#x27; &#x27;);
}</code></pre></main><div id="disqus_thread"></div></article><a class="back" href="/">Back to all posts</a></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"metadata":{"published":true,"title":"Random Sentences","blurb":"Generating study material for language learning","layout":"post","tags":["random","markov"],"date":"Nov 22, 2014"},"content":"\nRecently, I have been trying to learn the Hungarian language. After memorizing a bunch of words, just repeating them to study got boring. I wanted to write a program which randomly created sentences I could use to practice with. Of course, the best practice would be to go find a native speaker near me, but I wanted a challenge...\n\n### Hypothesis\n\nIn order to generate random sentences, I needed some kind of sentence building logic. I have used Markov Chains to build random names in the past, so why would it not work for sentences?\n\n### Data\n\nFirst! I needed data. Thank God for \u003chttp://www.gutenberg.org/\u003e. This saved me loads of time finding a bunch of random text.\n\n### Training\n\nThis was a lot of data, so I did not want to load it all in memory at once. Let's use Stream's!\n\nI streamed the huge text data file and counted all the instances of each [bigram](http://en.wikipedia.org/wiki/Bigram) and [trigram](http://en.wikipedia.org/wiki/Trigram). After counting, I sorted each word's adjacent neighbor by the number of instances. This gave me a list of words and their most used adajcent bigram and trigram neighbor.\n\n### Generation\n\nWith this Markov \"link\" data, I was able to generate rudimentary sentences. Nothing made sense, but it was easy to read.\n\nThese sentences are not logical, they are built by choosing what word should statistically come next.\n\n### Ideas for the future:\n\n- Extract/Analyze subject, verb, object in each sentence\n- Use neural networks for training _next_ word\n\n### Code\n\n```js\n//Create Markov links\nfunction createLinks(input, output, n) {\n\tvar links = {};\n\n\tif (!n) {\n\t\tn = 2; // bigram by default\n\t}\n\n\tfunction trainSentence(sentence) {\n\t\tNGrams.ngrams(sentence, n).forEach(function(gram) {\n\t\t\tvar word = gram[0];\n\t\t\tvar neighbor = gram[n - 1];\n\t\t\tif (!links[word]) {\n\t\t\t\tlinks[word] = {};\n\t\t\t}\n\t\t\tif (!links[word][neighbor]) {\n\t\t\t\tlinks[word][neighbor] = 0;\n\t\t\t}\n\t\t\tlinks[word][neighbor]++;\n\t\t});\n\t}\n\n\tfunction read() {\n\t\tvar buffer;\n\t\twhile ((buffer = stream.read())) {\n\t\t\tbuffer\n\t\t\t\t.toLowerCase()\n\t\t\t\t.split(/\\./g)\n\t\t\t\t.forEach(trainSentence);\n\t\t}\n\t}\n\n\tvar stream = fs.createReadStream(input, {\n\t\tencoding: 'utf8'\n\t});\n\n\tstream.on('readable', read);\n\n\tstream.once('end', function() {\n\t\tvar sortedLinks = {};\n\t\tvar keys = Object.keys(links);\n\n\t\tkeys.forEach(function(key) {\n\t\t\tvar words = Object.keys(links[key]);\n\t\t\tsortedLinks[key] = _.sortBy(words, function(word) {\n\t\t\t\treturn links[key][word];\n\t\t\t});\n\t\t});\n\n\t\tfs.writeFile(output, JSON.stringify(sortedLinks, null, '\\t'));\n\t});\n}\n```\n\n```javascript\n//Generate Sentence\nfunction generateSentenceMark2(\n\tbigramInput,\n\ttrigramInput,\n\tlength,\n\tk,\n\tdictionary,\n\tstarter\n) {\n\tvar bigrams = require(bigramInput);\n\tvar trigrams = require(trigramInput);\n\n\tvar current = starter || _.sample(dictionary || Object.keys(bigrams));\n\tvar last;\n\n\tvar sentence = [current];\n\n\tfunction dictionaryContains(word) {\n\t\treturn _.contains(dictionary, word);\n\t}\n\n\tfunction getNeighbor(links, word) {\n\t\tvar neighbors = links[word];\n\t\tif (dictionary) {\n\t\t\tneighbors = neighbors.filter(dictionaryContains);\n\t\t}\n\t\t// neighbors might be null or empty...\n\t\tvar neighbor = neighbors[Math.ceil(neighbors.length * Math.random() * k)];\n\t\t// Go through all of the words if word doesnt have neighbors\n\t\tvar i = 0;\n\t\twhile (!_.has(links, neighbor) \u0026\u0026 i \u003c neighbors.length) {\n\t\t\tneighbor = neighbors[i++];\n\t\t}\n\t\treturn neighbor;\n\t}\n\n\t// Generate Neighbors\n\t_(length - 1).times(function(i) {\n\t\tvar neighbor =\n\t\t\ti % 2 === 0 ? getNeighbor(bigrams, current) : getNeighbor(trigrams, last);\n\t\tlast = current;\n\t\tcurrent = neighbor;\n\t\tsentence.push(current);\n\t});\n\n\treturn sentence.join(' ');\n}\n```\n","slug":"random-sentences","index":38,"path":"/post/random-sentences"},"__N_SSG":true},"page":"/post/[slug]","query":{"slug":"random-sentences"},"buildId":"Di4rWVvYeeWQH6DW9oLr8","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>