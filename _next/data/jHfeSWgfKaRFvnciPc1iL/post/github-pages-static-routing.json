{"pageProps":{"metadata":{"published":true,"title":"Github Pages Static Routing","blurb":"Fixing statically hosted Github Pages site routing with directory indexes","layout":"post","date":"Feb 6, 2019"},"content":"\nI ran into this issue when using [create-react-app](https://facebook.github.io/create-react-app/) and [react-snapshot](https://github.com/geelen/react-snapshot) together, but it's possible to use this solution for any setup which creates this problem.\n\n### The Problem\n\nAfter building static site assets, you may have rendered HTML files which link to your difference pages. When using Github to host a static site, it is important to structure these files in their own directory with an index. Using this organization, Github will respond with the correct page.\n\n**Stucture before**\n\n    /site\n        /site/index.html\n        /site/pages/a.html\n        /site/pages/b.html\n        /site/pages/c.html\n\n**After structure fix**\n\n    /site\n        /site/index.html\n        /site/pages/a/index.html\n        /site/pages/b/index.html\n        /site/pages/c/index.html\n\nOnly with this structure can you use loose routes such as:\n\n- https://handle.github.io/site/pages/a\n- https://handle.github.io/site/pages/b/\n- https://handle.github.io/site\n\nIn order to maintain this structure, I wrote a small script to fix the original build output from react-snapshot output.\n\n```js\nconst fs = require('fs');\nconst path = require('path');\n\nconst dir = 'build/post';\nconst posts = fs.readdirSync(dir).filter(name => name.endsWith('html'));\n\nfor (const post of posts) {\n  const base = path.basename(post, '.html');\n  try {\n    fs.mkdirSync(`${dir}/${base}`);\n  } catch (e) {\n    console.log(e.message);\n  }\n  fs.renameSync(`${dir}/${post}`, `${dir}/${base}/index.html`);\n}\n```\n\nI hope someone else finds this useful when building static sites hosted on Github!\n","slug":"github-pages-static-routing","index":13,"path":"/post/github-pages-static-routing"},"__N_SSG":true}